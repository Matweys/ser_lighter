# Lighter Trading Bot

ÐŸÐ¾Ð»Ð½Ð°Ñ Ð°Ð´Ð°Ð¿Ñ‚Ð°Ñ†Ð¸Ñ SignalScalperStrategy Ð´Ð»Ñ Ð±Ð¸Ñ€Ð¶Ð¸ Lighter Ñ Ñ‚Ð¾Ð¹ Ð¶Ðµ Ð»Ð¾Ð³Ð¸ÐºÐ¾Ð¹ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð»Ð¸.

## ðŸ“‹ Ð§Ñ‚Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾

### âœ… ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹

1. **API ÐÐ´Ð°Ð¿Ñ‚ÐµÑ€** (`api/lighter_api.py`)
   - ÐžÐ±ÐµÑ€Ñ‚ÐºÐ° Ð½Ð°Ð´ `lighter_client.py` Ð¸ `lighter_md.py`
   - Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ñ `BybitAPI`
   - ÐœÐµÑ‚Ð¾Ð´Ñ‹: `get_klines()`, `place_market_order()`, `get_positions()`, `stream_price_updates()`

2. **Signal Analyzer** (`analysis/lighter_signal_analyzer.py`)
   - ÐÐ´Ð°Ð¿Ñ‚Ð°Ñ†Ð¸Ñ `SignalAnalyzer` Ð´Ð»Ñ Lighter
   - EMA (21/50) + RSI (14) Ð°Ð½Ð°Ð»Ð¸Ð·
   - Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð² LONG/SHORT/HOLD

3. **ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ** (`strategies/lighter_signal_scalper_strategy.py`)
   - ÐŸÐ¾Ð»Ð½Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¸Ð· `SignalScalperStrategy`
   - Ð’Ñ…Ð¾Ð´ Ð¿Ð¾ ÑÐ¸Ð³Ð½Ð°Ð»Ð°Ð¼ EMA+RSI
   - Ð£ÑÑ€ÐµÐ´Ð½ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑƒÐ±Ñ‹Ñ‚ÐºÐµ 15%
   - Ð¢Ñ€ÐµÐ¹Ð»Ð¸Ð½Ð³-ÑÑ‚Ð¾Ð¿ (Ð¾Ñ‚ÐºÐ°Ñ‚ 20% Ð¾Ñ‚ Ð¿Ð¸ÐºÐ°)
   - Ð¡Ñ‚Ð¾Ð¿-Ð»Ð¾ÑÑ 55% Ð¾Ñ‚ Ð¼Ð°Ñ€Ð¶Ð¸

4. **Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°** (`lighter_trading_bot.py`)
   - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð²ÑÐµÑ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²
   - Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð‘Ð” Ð¸ Telegram

## ðŸ”§ Ð›Ð¾Ð³Ð¸ÐºÐ° Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð»Ð¸ (Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ‡Ð½Ð° SignalScalperStrategy)

### Ð’Ñ…Ð¾Ð´ Ð² Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ

1. **Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÑÐ¸Ð³Ð½Ð°Ð»Ð°** (ÐºÐ°Ð¶Ð´Ñ‹Ðµ 5 Ð¼Ð¸Ð½ÑƒÑ‚):
   - LONG: EMA(21) > EMA(50) Ð˜ RSI Ð² Ð·Ð¾Ð½Ðµ 30-70
   - SHORT: EMA(21) < EMA(50) Ð˜ RSI Ð² Ð·Ð¾Ð½Ðµ 30-70

2. **ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ**:
   - Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ 2 Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ñ‹Ñ… ÑÐ¸Ð³Ð½Ð°Ð»Ð° Ð¿Ð¾Ð´Ñ€ÑÐ´
   - ÐŸÐ¾ÑÐ»Ðµ ÑƒÐ±Ñ‹Ñ‚ÐºÐ° â†’ 3 Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ

3. **ÐšÑƒÐ»Ð´Ð°ÑƒÐ½**: 60 ÑÐµÐºÑƒÐ½Ð´ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ ÑÐ´ÐµÐ»ÐºÐ¸

4. **Ð’Ñ…Ð¾Ð´**: MARKET Ð¾Ñ€Ð´ÐµÑ€ Ð½Ð° ÑÑƒÐ¼Ð¼Ñƒ `order_amount` USDT

### Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÐµÐ¹

- **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ñ†ÐµÐ½Ñ‹**: ÐºÐ°Ð¶Ð´ÑƒÑŽ ÑÐµÐºÑƒÐ½Ð´Ñƒ
- **Ð£ÑÑ€ÐµÐ´Ð½ÐµÐ½Ð¸Ðµ**: Ð¿Ñ€Ð¸ ÑƒÐ±Ñ‹Ñ‚ÐºÐµ â‰¥15% Ð¾Ñ‚ Ð¼Ð°Ñ€Ð¶Ð¸ (1 Ñ€Ð°Ð·, Ð¼Ð½Ð¾Ð¶Ð¸Ñ‚ÐµÐ»ÑŒ 1.0x)
- **Ð¡Ñ‚Ð¾Ð¿-Ð»Ð¾ÑÑ**: 55% Ð¾Ñ‚ Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°Ñ€Ð¶Ð¸

### Ð’Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸

- **Ð¢Ñ€ÐµÐ¹Ð»Ð¸Ð½Ð³-ÑÑ‚Ð¾Ð¿**: Ð¾Ñ‚ÐºÐ°Ñ‚ 20% Ð¾Ñ‚ Ð¿Ð¸ÐºÐ° Ð¿Ñ€Ð¸Ð±Ñ‹Ð»Ð¸ â†’ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ
- **Ð¡Ñ‚Ð¾Ð¿-Ð»Ð¾ÑÑ**: ÑƒÐ±Ñ‹Ñ‚Ð¾Ðº 55% Ð¾Ñ‚ Ð¼Ð°Ñ€Ð¶Ð¸ â†’ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ

## ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº

### ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

```bash
# Telegram (Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)
export TELEGRAM_TOKEN="8327834182:AAEMAZw1NDSIEf6jbB-VU9CDTNv8FSxLgAo"
export TELEGRAM_CHANNEL_ID="-1003110580787"

# Lighter (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¸Ð¼Ð²Ð¾Ð»)
export LIGHTER_SYMBOL="SOL"  # ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ SOL

# Redis (Ð´Ð»Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹)
export REDIS_URL="redis://localhost:6379/0"
```

**Ð’Ð°Ð¶Ð½Ð¾**: API ÐºÐ»ÑŽÑ‡Ð¸ Ð¾Ñ‚ Lighter ÐÐ• Ð½ÑƒÐ¶Ð½Ñ‹! Ð­Ñ‚Ð¾ Ð¿Ð¾Ð»Ð½Ð°Ñ ÑÐ¸Ð¼ÑƒÐ»ÑÑ†Ð¸Ñ Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð»Ð¸.

### Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°

```bash
python lighter_trading_bot.py
```

## ðŸ“Š Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð² Ð‘Ð”

Ð’ÑÐµ ÑÐ´ÐµÐ»ÐºÐ¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð² **SQLite** (Ñ„Ð°Ð¹Ð» `lighter_trading.db`):
- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° `trades`: Ð²Ñ…Ð¾Ð´, Ð²Ñ‹Ñ…Ð¾Ð´, PnL, ÐºÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸
- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° `orders`: Ð²ÑÐµ Ð¾Ñ€Ð´ÐµÑ€Ð° (OPEN, CLOSE, AVERAGING)

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° SQLite:**
- âœ… ÐÐµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ PostgreSQL
- âœ… Ð’ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ñ„Ð°Ð¹Ð»Ðµ
- âœ… Ð›ÐµÐ³ÐºÐ¾ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ

## ðŸ“± Telegram ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ

Ð‘Ð¾Ñ‚ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð² Telegram:
- âœ… Ð’Ñ…Ð¾Ð´ Ð² Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ (Ñ†ÐµÐ½Ð°, Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ, Ñ€Ð°Ð·Ð¼ÐµÑ€)
- ðŸ’° Ð£ÑÑ€ÐµÐ´Ð½ÐµÐ½Ð¸Ðµ (Ð½Ð¾Ð²Ð°Ñ ÑÑ€ÐµÐ´Ð½ÑÑ Ñ†ÐµÐ½Ð°, Ñ€Ð°Ð·Ð¼ÐµÑ€)
- âœ… Ð’Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ (PnL, Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ð° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ)

## âš™ï¸ ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð±ÐµÑ€ÑƒÑ‚ÑÑ Ð¸Ð· Redis (ÐºÐ°Ðº Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸):
- `order_amount`: 200 USDT (Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸)
- `leverage`: 2x (Ð¿Ð»ÐµÑ‡Ð¾)
- `EMA_SHORT`: 21
- `EMA_LONG`: 50
- `RSI_PERIOD`: 14
- `averaging_trigger_loss_percent`: 15%
- `averaging_stop_loss_percent`: 55%

## ðŸ”„ ÐžÑ‚Ð»Ð¸Ñ‡Ð¸Ñ Ð¾Ñ‚ Bybit Ð²ÐµÑ€ÑÐ¸Ð¸

1. **Ð Ð•Ð–Ð˜Ðœ Ð¡Ð˜ÐœÐ£Ð›Ð¯Ð¦Ð˜Ð˜**: Ð’ÑÐµ ÑÐ´ÐµÐ»ÐºÐ¸ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ, Ð±ÐµÐ· Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð¾Ñ€Ð´ÐµÑ€Ð¾Ð² Ð½Ð° Ð±Ð¸Ñ€Ð¶Ðµ
2. **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ñ†ÐµÐ½Ñ‹**: Ñ‡ÐµÑ€ÐµÐ· `stream_midprice()` (Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ - Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ)
3. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð²**: ÐºÐ°Ð¶Ð´Ñ‹Ðµ 5 Ð¼Ð¸Ð½ÑƒÑ‚ (Ñ†Ð¸ÐºÐ») Ð²Ð¼ÐµÑÑ‚Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ ÑÐ²ÐµÑ‡ÐµÐ¹
4. **Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…**: SQLite Ð²Ð¼ÐµÑÑ‚Ð¾ PostgreSQL
5. **API ÐºÐ»ÑŽÑ‡Ð¸**: ÐÐ• Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ! Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ñ†ÐµÐ½
6. **ÐšÐ¾Ð¼Ð¸ÑÑÐ¸Ð¸**: Ð¡Ð¸Ð¼ÑƒÐ»Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ (Ð¼Ð¾Ð¶Ð½Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ)

## ðŸ“ ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ

- ðŸŽ® **Ð Ð•Ð–Ð˜Ðœ Ð¡Ð˜ÐœÐ£Ð›Ð¯Ð¦Ð˜Ð˜**: Ð’ÑÐµ ÑÐ´ÐµÐ»ÐºÐ¸ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ, Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð´ÐµÐ½ÑŒÐ³Ð¸ Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ
- ðŸ“Š **Ð¦ÐµÐ½Ñ‹ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ**: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Lighter Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ñ†ÐµÐ½
- ðŸ’¾ **SQLite**: Ð’ÑÐµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ñ„Ð°Ð¹Ð»Ðµ `lighter_trading.db` Ð² ÐºÐ¾Ñ€Ð½Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
- ðŸ“± **Telegram**: Ð’ÑÐµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¸Ð´ÑƒÑ‚ Ð² ÐºÐ°Ð½Ð°Ð» (ÐµÑÐ»Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½)
- ðŸ”‘ **API ÐºÐ»ÑŽÑ‡Ð¸**: ÐÐ• Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ÑÑ! Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾ Ñ†ÐµÐ½Ð°Ñ…
- Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ñ‚Ð¾Ñ‚ Ð¶Ðµ `StrategyType.SIGNAL_SCALPER` Ð´Ð»Ñ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚Ð¸
- Ð›Ð¾Ð³Ð¸ÐºÐ° Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ‡Ð½Ð° Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸

